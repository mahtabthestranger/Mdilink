{% extends "base.html" %}

{% block title %}Edit Medical Record - Medilink{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-8">
        <h2><i class="fas fa-edit me-2"></i>Edit Medical Record</h2>
        <p class="text-muted">For Patient: <strong>{{ record.patient_name }}</strong></p>
    </div>
    <div class="col-md-4 text-end">
        <a href="{{ url_for('doctor_view_patient', patient_id=record.patient_id) }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left me-1"></i> Back to Patient
        </a>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-body">
        <form method="POST" action="{{ url_for('doctor_edit_record', record_id=record.record_id) }}">
            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="diagnosis" class="form-label fw-bold">Diagnosis <span
                            class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="diagnosis" name="diagnosis" required
                        value="{{ record.diagnosis }}">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="symptoms" class="form-label fw-bold">Symptoms</label>
                    <textarea class="form-control" id="symptoms" name="symptoms"
                        rows="3">{{ record.symptoms or '' }}</textarea>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="prescription" class="form-label fw-bold">Prescription</label>
                    <textarea class="form-control" id="prescription" name="prescription"
                        rows="4">{{ record.prescription or '' }}</textarea>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="tests_recommended" class="form-label fw-bold">Tests Recommended</label>
                    <textarea class="form-control" id="tests_recommended" name="tests_recommended"
                        rows="2">{{ record.tests_recommended or '' }}</textarea>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="follow_up_date" class="form-label fw-bold">Follow-up Date</label>
                    <input type="date" class="form-control" id="follow_up_date" name="follow_up_date"
                        value="{{ record.follow_up_date }}">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="notes" class="form-label fw-bold">Additional Notes</label>
                    <textarea class="form-control" id="notes" name="notes" rows="2">{{ record.notes or '' }}</textarea>
                </div>
            </div>

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a href="{{ url_for('doctor_view_patient', patient_id=record.patient_id) }}"
                    class="btn btn-light me-md-2">Cancel</a>
                <button type="submit" class="btn btn-primary px-4">Update Record</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}